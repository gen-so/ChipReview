@page "/{vendor}/{chip}"
@using BlazorApp.Shared
@inject HttpClient Http


<PageTitle>@chip | Review</PageTitle>


<div style="display:grid">

    <ChipInfoBox Chip=@chip Vendor=@vendor/>


    <hr />


    <p>@reviewCount Reviews</p>

    <div id="review-list">

        @if (reviewCount == 0)
        {
            <p><em>Loading...</em></p>
        }
        else
        {
            @foreach (var review in reviewList)
            {
                <ReviewBox Review=review/>
            }
        }

    </div>
</div>





@code {
    [Parameter]
    public string? vendor { get; set; }
    [Parameter]
    public string? chip { get; set; }
}


@functions {
    List<BlazorApp.Shared.Review> reviewList;
    int reviewCount = 0;

    protected override async Task OnInitializedAsync()
    {

        //get a list of reviews from API server by chip & vendor
        reviewList = await ServerManager.GetReviewList(chip, vendor);

        //set the review count
        reviewCount = reviewList.Count;

    }
}
